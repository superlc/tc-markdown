# Proposal: add-inline-prediction

## Why

流式渲染 Markdown 时，未闭合的行内标记（如 `**text`、`` `code ``、`[link](url`）会先显示为纯文本，等标记闭合后突然变成对应的格式化元素，造成明显的视觉闪烁，影响阅读体验。

**当前问题示例**:
```
输入: "这是**粗体"     → 显示: "这是**粗体"（纯文本）
输入: "这是**粗体**"   → 显示: "这是<strong>粗体</strong>"（突然变化）
```

## What Changes

参考 marked 的 remend 实现，在解析前对未闭合的行内标记进行智能补全：

1. **行内标记预测补全器** (`InlineCompleter`)
   - 检测未闭合的行内标记模式
   - 自动补全闭合标记后解析
   - 解析后移除补全的虚拟节点

2. **支持的行内标记**:
   - `**bold**` / `__bold__` (粗体)
   - `*italic*` / `_italic_` (斜体)
   - `` `code` `` (行内代码)
   - `~~strikethrough~~` (删除线)
   - `[text](url)` / `[text][ref]` (链接)
   - `![alt](url)` (图片)

3. **预测策略**:
   - 检测到开始标记但未闭合 → 在末尾补全闭合标记
   - 解析为目标元素 → 标记为 "pending" 状态
   - 真正闭合时 → 移除 pending 标记

4. **视觉效果**:
   - 未闭合的行内元素预渲染为目标格式
   - 可选添加视觉提示（如虚线边框或淡化样式）
